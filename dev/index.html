<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · LLMTextAnalysis.jl</title><meta name="title" content="Home · LLMTextAnalysis.jl"/><meta property="og:title" content="Home · LLMTextAnalysis.jl"/><meta property="twitter:title" content="Home · LLMTextAnalysis.jl"/><meta name="description" content="Documentation for LLMTextAnalysis.jl."/><meta property="og:description" content="Documentation for LLMTextAnalysis.jl."/><meta property="twitter:description" content="Documentation for LLMTextAnalysis.jl."/><meta property="og:url" content="https://svilupp.github.io/LLMTextAnalysis.jl/"/><meta property="twitter:url" content="https://svilupp.github.io/LLMTextAnalysis.jl/"/><link rel="canonical" href="https://svilupp.github.io/LLMTextAnalysis.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>LLMTextAnalysis.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="examples/1_topics_in_city_of_austin_community_survey/">Explore Topics in Your Documents</a></li><li><a class="tocitem" href="examples/2_concept_labeling_in_city_of_austin_community_survey/">Look for specific Concept/Spectrum</a></li></ul></li><li><a class="tocitem" href="FAQ/">F.A.Q.</a></li><li><a class="tocitem" href="api_reference/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/svilupp/LLMTextAnalysis.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/svilupp/LLMTextAnalysis.jl/blob/main/docs/src/index.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="LLMTextAnalysis"><a class="docs-heading-anchor" href="#LLMTextAnalysis">LLMTextAnalysis</a><a id="LLMTextAnalysis-1"></a><a class="docs-heading-anchor-permalink" href="#LLMTextAnalysis" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/svilupp/LLMTextAnalysis.jl">LLMTextAnalysis</a>.</p><p>Effortlessly uncover and label thematic insights in large document collections using the power of Large Language Models</p><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>LLMTextAnalysis.jl is a Julia package crafted to harness the power of Large Language Models (LLMs) for effectively identifying and labeling topics within document corpora. It offers an efficient way to analyze textual data, providing insights into underlying themes and concepts.</p><h3 id="Quick-Start"><a class="docs-heading-anchor" href="#Quick-Start">Quick Start</a><a id="Quick-Start-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-Start" title="Permalink"></a></h3><p>Jump right into LLMTextAnalysis.jl with this simple example:</p><p>Note: You need to have a working LLM setup to run this example. See <a href="https://github.com/svilupp/PromptingTools.jl">PromptingTools.jl</a>. It takes a maximum of two minutes to get the OpenAI API key.</p><pre><code class="language-julia hljs">using LLMTextAnalysis
texts = [&quot;I like fries&quot;,&quot;I like burgers&quot;,&quot;How do you cook chicken?&quot;, &quot;Recently, I read a fantasy novel about dragons&quot;] # some vector of documents
index = build_index(texts)</code></pre><p>You&#39;ll see the following output:</p><pre><code class="language-plaintext hljs">[ Info: Embedding 4 documents...
[ Info: Done embedding. Total cost: $0.0
[ Info: Computing pairwise distances...
[ Info: Extracting keywords...

DocIndex(Documents: 4, PlotData: None, Topic Levels: 2)</code></pre><p>Now, you can use the <code>build_clusters!</code> function to add some topic clusters:</p><pre><code class="language-julia hljs">build_clusters!(index; k=2) # if you don&#39;t choose k, it will be chosen automatically
# review the topics generated when we ask for 2 clusters
index.topic_levels[2]</code></pre><pre><code class="language-plaintext hljs">[ Info: Building hierarchical clusters...
[ Info: Cutting clusters at k=2...
[ Info: Done building 2 topics. Cost: $0.0

2-element Vector{TopicMetadata}:
 TopicMetadata(ID: 1/2, Documents: 3, Label: &quot;Food Preferences and Cooking Techniques&quot;,  Summary: -)
 TopicMetadata(ID: 2/2, Documents: 1, Label: &quot;Dragons in Fantasy Novels&quot;,  Summary: -)</code></pre><p>Or you can just call the <code>plot</code> function (it will create some topic clusters automatically under the hood):</p><pre><code class="language-julia hljs">using Plots
plot(index)</code></pre><p>For some visual examples, jump to <a href="examples/1_topics_in_city_of_austin_community_survey/#Example-1:-Topics-in-the-City-of-Austin-Community-Survey">Example 1: Topics in the City of Austin Community Survey</a>.</p><h3 id="Installation-and-Setup"><a class="docs-heading-anchor" href="#Installation-and-Setup">Installation and Setup</a><a id="Installation-and-Setup-1"></a><a class="docs-heading-anchor-permalink" href="#Installation-and-Setup" title="Permalink"></a></h3><p>Install LLMTextAnalysis.jl via a direct link (it&#39;s not yet registered).</p><pre><code class="language-julia hljs">using Pkg
Pkg.add(&quot;https://github.com/svilupp/LLMTextAnalysis.jl&quot;)</code></pre><p>The package depends on PromptingTools.jl, which facilitates integration with various Large Language Models. We recommend OpenAI for its efficiency, cost-effectiveness, and privacy. See <a href="https://github.com/svilupp/PromptingTools.jl">PromptingTools.jl documentation</a> for setup details.</p><h3 id="Explore-Topics"><a class="docs-heading-anchor" href="#Explore-Topics">Explore Topics</a><a id="Explore-Topics-1"></a><a class="docs-heading-anchor-permalink" href="#Explore-Topics" title="Permalink"></a></h3><p>Start analyzing your document corpus with these steps:</p><ol><li>Load your documents into the package.</li><li>Use the <code>build_index</code> function to process your texts.</li><li>Use the <code>plot</code> function to visualize the results. It will call all the supporting functions under the hood.</li></ol><p>A good starting point is the City of Austin Community Survey, available <a href="https://data.austintexas.gov/dataset/Community-Survey/s2py-ceb7/data">here</a>.</p><pre><code class="language-julia hljs">using Downloads, CSV, DataFrames
using Plots
using LLMTextAnalysis
plotlyjs() # recommended backend for interactivity, install with `using Pkg; Pkg.add(&quot;PlotlyJS&quot;)`

## Load the data
df = CSV.read(joinpath(@__DIR__, &quot;cityofaustin.csv&quot;), DataFrame);
col = &quot;Q25 - If there was one thing you could share with the Mayor regarding the City of Austin (any comment, suggestion, etc.), what would it be?&quot;
docs = df[!, col] |&gt; skipmissing |&gt; collect;

## Explore the topics in just 2 lines of code
index = build_index(docs)
pl = plot(index; title = &quot;City of Austin Community Survey Themes&quot;)</code></pre><p><img src="assets/austin_scatter.png" alt="Plot of Individual Documents"/></p><p>Run the example yourself via <code>examples/1_topics_in_city_of_austin_community_survey.jl</code> or check it here: <a href="examples/1_topics_in_city_of_austin_community_survey/#Example-1:-Topics-in-the-City-of-Austin-Community-Survey">Example 1: Topics in the City of Austin Community Survey</a>.</p><h3 id="Identify-and-Score-Documents-on-Arbitrary-Concepts-/-Spectrum"><a class="docs-heading-anchor" href="#Identify-and-Score-Documents-on-Arbitrary-Concepts-/-Spectrum">Identify and Score Documents on Arbitrary Concepts / Spectrum</a><a id="Identify-and-Score-Documents-on-Arbitrary-Concepts-/-Spectrum-1"></a><a class="docs-heading-anchor-permalink" href="#Identify-and-Score-Documents-on-Arbitrary-Concepts-/-Spectrum" title="Permalink"></a></h3><p>Sometimes you know what you&#39;re looking for, but it&#39;s hard to define the exact keywords. For example, you might want to identify documents that are &quot;action-oriented&quot; or &quot;pessimistic&quot; or &quot;forward-looking&quot;.</p><p>For these situations, <code>LLMTextAnalysis</code> offers two distinct functions for document analysis: <code>train_concept</code> and <code>train_spectrum</code>. Each serves a different purpose in text analysis:</p><ul><li><strong><code>train_concept</code></strong>: Focuses on analyzing a single, specific concept within documents (eg, &quot;action-oriented&quot;)</li><li><strong><code>train_spectrum</code></strong>: Analyzes documents in the context of two opposing concepts (eg, &quot;optimistic&quot; vs. &quot;pessimistic&quot; or &quot;forward-looking&quot; vs. &quot;backward-looking&quot;)</li></ul><p>The resulting return types are <code>TrainedConcept</code> and <code>TrainedSpectrum</code>, respectively. Both can be used to score documents on the presence of the concept or their position on the spectrum.</p><p>Why do we need <code>train_spectrum</code> and not simply use two <code>TrainedConcepts</code>? It&#39;s because opposite of &quot;forward-looking&quot; can be many things, eg, &quot;short-sighted&quot;, &quot;dwelling in the past&quot;, or simply &quot;not-forward looking&quot;. </p><p><code>train_spectrum</code> allows you to define the opposite concept that you need and score documents on the spectrum between the two.</p><h4 id="train_concept"><a class="docs-heading-anchor" href="#train_concept"><code>train_concept</code></a><a id="train_concept-1"></a><a class="docs-heading-anchor-permalink" href="#train_concept" title="Permalink"></a></h4><p>Identify and score the presence of a specific concept in documents.</p><pre><code class="language-julia hljs">index = build_index(docs)
concept = train_concept(index, &quot;sustainability&quot;)
scores = score(index, concept)

# show top 5 docs
index.docs[first(sortperm(scores, rev = true), 5)]
# 5-element Vector{String}:
# [&quot;focus on smart growth, sustainability and affordability are just as important as business development and should not be sacrificed for economic growth.&quot;, &quot;SUSTAINABILITY OF CITY&quot;, &quot;we need to plan for global climate change, water and energy programs must be robust&quot;, &quot;Public transport and planned, sustainable, affordable growth are the most important issues.&quot;, &quot;Make more conservation and sustainability efforts.&quot;]</code></pre><h4 id="train_spectrum"><a class="docs-heading-anchor" href="#train_spectrum"><code>train_spectrum</code></a><a id="train_spectrum-1"></a><a class="docs-heading-anchor-permalink" href="#train_spectrum" title="Permalink"></a></h4><p>Evaluate documents on a spectrum defined by two contrasting concepts.</p><pre><code class="language-julia hljs">index = &quot;...&quot; # re-use the index from the previous example
# aigenerate_kwargs are passed directly to PromptingTools.aigenerate (see PromptingTools.jl docs)
spectrum = train_spectrum(index, (&quot;forward-looking&quot;, &quot;dwelling in the past&quot;); 
  aigenerate_kwargs = (;model=&quot;gpt3t&quot;))
scores = score(index, spectrum)

# show top 5 docs for &quot;forward-looking&quot; (spectrum 1, ie, the &quot;highest&quot; score)
index.docs[first(sortperm(scores, rev = true), 5)]
# 5-element Vector{String}:
# [&quot;He is doing a great job. Setting planning for growth, transportation and mobility together is an excellent approach.&quot;, &quot;PLAN FOR ACCELERATED GROWTH. CLIMATE CHANGES PROMISES TO DELIVER MORE COASTAL CRISIS AND POPULATION DISPLACEMENT. AUSTIN WILL EXPAND AS A RESULT. THINK BIG. THANK YOU FOR PRIORITIZING SMART GROWTH AND A DENSE URBAN LANDSCAPE.&quot;, &quot;Austin will grow! Prioritize development and roadways.&quot;, &quot;Affordable housing. Better planning for future. Mass transit (rail system that covers City wide.&quot;, &quot;PLAN FOR THE FUTURE AND SUSTAINABLE GROWTH. STOP FOCUSING ON EXCLUSIVE SERVICES LIKE TOLL ROAD EXPANSION AND INSTEAD, PUSH FOR PROGRAMS WITH THE LARGEST BENEFIT FOR THE MOST PEOPLE IN THE FUTURE, LIKE A SUBWAY SYSTEM AND CITY-SPONSORED DISTRIBUTED SOLAR AND ELECTRIC VEHICLE NETWORK.&quot;]</code></pre><blockquote><p>[!TIP] Choose <code>train_concept</code> for depth in a single theme, and <code>train_spectrum</code> for comparative insights across two themes. Each function enhances text analysis with its unique approach to understanding document content.</p></blockquote><blockquote><p>[!TIP] Remember to <code>serialize</code> your trained concepts and spectra to the disk for future use. This will save you time and money when you need to restart the REPL session.</p></blockquote><h3 id="Advanced-Features-and-Best-Practices"><a class="docs-heading-anchor" href="#Advanced-Features-and-Best-Practices">Advanced Features and Best Practices</a><a id="Advanced-Features-and-Best-Practices-1"></a><a class="docs-heading-anchor-permalink" href="#Advanced-Features-and-Best-Practices" title="Permalink"></a></h3><p>This section covers more advanced use cases and best practices for optimal results.</p><ul><li>Serialize your index to the disk (once the topics are fitted)! Saves money and time when you need to restart the REPL session.</li><li>If you dislike the INFO logs, set <code>verbose=false</code>.</li><li>Start by &quot;zooming out&quot; to get a sense of the overall themes (set <code>k=4</code>), then &quot;zoom in&quot; to explore the sub-themes (eg, set <code>k=20</code>)</li><li>Leverage the plot interactivity (<code>PlotlyJS</code> backend will display the actual texts and topic labels on hover).</li><li>For diverse datasets like survey questions (eg, DataFrame with many columns), create a separate index for each open-ended question for easy comparison / switching back and forth.</li><li>For large documents, use <code>split_by_length</code> from PromptingTools.jl to split them into smaller chunks and explore the sub-themes.</li><li>The package is designed for tens of thousands of documents, typically processed within minutes. For hundreds of thousands of documents, please await future versions with enhanced efficiency features.</li></ul><h3 id="Core-Concepts"><a class="docs-heading-anchor" href="#Core-Concepts">Core Concepts</a><a id="Core-Concepts-1"></a><a class="docs-heading-anchor-permalink" href="#Core-Concepts" title="Permalink"></a></h3><p>LLMTextAnalysis.jl revolves around the <code>DocIndex</code> struct, which stores document chunks, embeddings, and related data. Document embeddings are pivotal, capturing the semantic essence of text chunks. LLMs are then employed to categorize and label the emerging themes.</p><h3 id="FAQs-and-Troubleshooting"><a class="docs-heading-anchor" href="#FAQs-and-Troubleshooting">FAQs and Troubleshooting</a><a id="FAQs-and-Troubleshooting-1"></a><a class="docs-heading-anchor-permalink" href="#FAQs-and-Troubleshooting" title="Permalink"></a></h3><p>For answers to common questions and troubleshooting advice, please refer to the FAQ section in the docs or open an issue. It also includes some directions for future development.</p><h3 id="Inspirations-and-Acknowledgements"><a class="docs-heading-anchor" href="#Inspirations-and-Acknowledgements">Inspirations and Acknowledgements</a><a id="Inspirations-and-Acknowledgements-1"></a><a class="docs-heading-anchor-permalink" href="#Inspirations-and-Acknowledgements" title="Permalink"></a></h3><p>The development of LLMTextAnalysis.jl drew inspiration from tools like <a href="https://www.lilacml.com/">lilac</a>, <a href="https://atlas.nomic.ai/">Nomic Atlas</a>, and the work of Linus Lee (see the <a href="https://www.youtube.com/watch?v=YvobVu1l7GI">presentation at AI Engineer Summit 2023</a>).</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="examples/1_topics_in_city_of_austin_community_survey/">Explore Topics in Your Documents »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 23 February 2024 09:40">Friday 23 February 2024</span>. Using Julia version 1.10.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
